<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="utf-8">
    <meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1">

    <link rel="stylesheet" href="../d3Chart.min.css">
    <style>
        svg {
            border: 1px solid black;
            border-radius: 25px;
        }

        .controllers {
            padding-top: 20px;
            padding-bottom: 20px;
            padding-left: 80px;
        }

        .controllers p {
            font-family: Times sans-serif;
            font-size: 14px
        }

        .controllers ul {
            font-family: Times sans-serif;
            font-size: 14px
        }

        .chart {
            padding-left: 60px;
            padding-right: 60px;
        }
    </style>

    <script type="text/javascript" src="../bower_components/d3/d3.js"></script>
    <script type="text/javascript" src="../d3Chart.js"></script>


</head>

<body>

    <div class="controllers">
        <h2>Scatterplot</h2>
        <p>Chart created with d3. where user has the flexibility to change the chart parameters on the fly.For Example:</p>
        <ul>
            <li>To Change the xAxis - call the API <b>setXAttribute(ColumnName)</b></li>
            <li>To Probe the Chart - call the API <b>probe(key)</b></li>
            <li>To Make a Selection - call the API <b>select(keys)</b></li>
        </ul>

        <br/>
        <p>Project is under devlopment , will add wiki and documentation soon.....
            <i>Thanks for looking at this demo.</i></p>
        <br/>
        <br/>

        <div style="float:left">
            X-Axis
            <select id="xSel" onchange="updateXAxis()"> </select>
        </div>

        <div>
            &#160;&#160;&#160;&#160;Y-Axis
            <select id="ySel" onchange="updateYAxis()"> </select>
        </div>
    </div>

    <div id="div1" class="chart"></div>


    <script type="text/javascript">
        var config = {
            container: "div1",
            margin: {
                top: 40,
                right: 20,
                bottom: 140,
                left: 80
            },

            columns: {
                x: "name",
                y: "protein"
            },
            interactions: {
                onProbe: {
                    showToolTip: true
                }
            }
        }

        var chart = new d3Chart.Scatterplot(config);


        var headerNames;
        d3.csv("cereal.csv", function (error, rows) {
            headerNames = d3.keys(rows[0]);
            var xSelect = document.getElementById("xSel");
            var ySelect = document.getElementById("ySel");

            for (var i = 0; i < headerNames.length; i++) {
                var opt = headerNames[i];
                var el = document.createElement("option");
                el.textContent = opt;
                el.value = opt;
                xSelect.appendChild(el);
                var el = document.createElement("option");
                el.textContent = opt;
                el.value = opt;
                ySelect.appendChild(el);
            }


            console.log(headerNames);
            chart.renderChart(rows);
            xSelect.value = config.columns.x;
            ySelect.value = config.columns.y;
        });

        function updateXAxis() {
            var xSelect = document.getElementById("xSel");
            console.log(xSelect.value);
            chart.setXAttribute(xSelect.value);
        }

        function updateYAxis() {
            var ySelect = document.getElementById("ySel");
            console.log(ySelect.value);
            chart.setYAttribute(ySelect.value);
        }
    </script>
</body>

</html>
